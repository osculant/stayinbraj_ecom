"use client";

import React, { useState, useEffect } from "react";
import { useAuth } from "../../../context/AuthContext.js";

import { ENV } from '@/config/env'; 

// Auth Buttons Component
const ContactInfoBar = ({ onLoginClick }) => {
  const { authToken } = useAuth();
  return (
    <section className="hidden sm:flex bg-white min-h-[40px] px-4 py-2 sm:px-10 items-center max-sm:flex-col border-b border-gray-300">
      <button type="button" className="text-gray-900 text-sm hover:text-red-600 group">
        <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="#000" className="mr-3 inline-block group-hover:fill-red-600" viewBox="0 0 482.6 482.6">
          <path
            d="M98.339 320.8c47.6 56.9 104.9 101.7 170.3 133.4 24.9 11.8 58.2 25.8 95.3 28.2 2.3.1 4.5.2 6.8.2 24.9 0 44.9-8.6 61.2-26.3.1-.1.3-.3.4-.5 5.8-7 12.4-13.3 19.3-20 4.7-4.5 9.5-9.2 14.1-14 21.3-22.2 21.3-50.4-.2-71.9l-60.1-60.1c-10.2-10.6-22.4-16.2-35.2-16.2-12.8 0-25.1 5.6-35.6 16.1l-35.8 35.8c-3.3-1.9-6.7-3.6-9.9-5.2-4-2-7.7-3.9-11-6-32.6-20.7-62.2-47.7-90.5-82.4-14.3-18.1-23.9-33.3-30.6-48.8 9.4-8.5 18.2-17.4 26.7-26.1 3-3.1 6.1-6.2 9.2-9.3 10.8-10.8 16.6-23.3 16.6-36s-5.7-25.2-16.6-36l-29.8-29.8c-3.5-3.5-6.8-6.9-10.2-10.4-6.6-6.8-13.5-13.8-20.3-20.1-10.3-10.1-22.4-15.4-35.2-15.4-12.7 0-24.9 5.3-35.6 15.5l-37.4 37.4c-13.6 13.6-21.3 30.1-22.9 49.2-1.9 23.9 2.5 49.3 13.9 80 17.5 47.5 43.9 91.6 83.1 138.7zm-72.6-216.6c1.2-13.3 6.3-24.4 15.9-34l37.2-37.2c5.8-5.6 12.2-8.5 18.4-8.5 6.1 0 12.3 2.9 18 8.7 6.7 6.2 13 12.7 19.8 19.6 3.4 3.5 6.9 7 10.4 10.6l29.8 29.8c6.2 6.2 9.4 12.5 9.4 18.7s-3.2 12.5-9.4 18.7c-3.1 3.1-6.2 6.3-9.3 9.4-9.3 9.4-18 18.3-27.6 26.8l-.5.5c-8.3 8.3-7 16.2-5 22.2.1.3.2.5.3.8 7.7 18.5 18.4 36.1 35.1 57.1 30 37 61.6 65.7 96.4 87.8 4.3 2.8 8.9 5 13.2 7.2 4 2 7.7 3.9 11 6 .4.2.7.4 1.1.6 3.3 1.7 6.5 2.5 9.7 2.5 8 0 13.2-5.1 14.9-6.8l37.4-37.4c5.8-5.8 12.1-8.9 18.3-8.9 7.6 0 13.8 4.7 17.7 8.9l60.3 60.2c12 12 11.9 25-.3 37.7-4.2 4.5-8.6 8.8-13.3 13.3-7 6.8-14.3 13.8-20.9 21.7-11.5 12.4-25.2 18.2-42.9 18.2-1.7 0-3.5-.1-5.2-.2-32.8-2.1-63.3-14.9-86.2-25.8-62.2-30.1-116.8-72.8-162.1-127-37.3-44.9-62.4-86.7-79-131.5-10.3-27.5-14.2-49.6-12.6-69.7z"
            data-original="#fff"
          ></path>
        </svg>
        <a href={`tel:${ENV.phoneNumber}`}>{ENV.phoneNumber}</a>
      </button>
      <span className="border-l h-3 mx-6 max-sm:hidden"></span>
      <button type="button" className="text-gray-900 text-sm max-sm:my-2 hover:text-red-600 group">
        <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="#000" className="mr-3 inline-block group-hover:fill-red-600" viewBox="0 0 479.058 479.058">
          <path d="M434.146 59.882H44.912C20.146 59.882 0 80.028 0 104.794v269.47c0 24.766 20.146 44.912 44.912 44.912h389.234c24.766 0 44.912-20.146 44.912-44.912v-269.47c0-24.766-20.146-44.912-44.912-44.912zm0 29.941c2.034 0 3.969.422 5.738 1.159L239.529 264.631 39.173 90.982a14.902 14.902 0 0 1 5.738-1.159zm0 299.411H44.912c-8.26 0-14.971-6.71-14.971-14.971V122.615l199.778 173.141c2.822 2.441 6.316 3.655 9.81 3.655s6.988-1.213 9.81-3.655l199.778-173.141v251.649c-.001 8.26-6.711 14.97-14.971 14.97z" data-original="#fff"></path>
        </svg>
        <a href={`mailto:${ENV.email}`}>{ENV.email}</a>
      </button>
      <div className="sm:ml-auto text-gray-900">
        {!authToken && (
          <>
            <button onClick={onLoginClick} type="button" className="text-gray-900 text-sm mr-1 cursor-pointer">
              Log In
            </button>
            /
            <button onClick={onLoginClick} type="button" className="text-gray-900 text-sm ml-1 cursor-pointer">
              Sign Up
            </button>
          </>
        )}
      </div>
    </section>
  );
};

const NavbarLinks = ({ onLoginClick }) => {
  return (
    <div id="navBar" className="w-full flex flex-wrap items-center justify-between py-3 px-4 sm:px-10 bg-white lg:gap-y-4 gap-y-6 gap-x-4 duration-300">
      <a href={ENV.links.web}>
        <img src={ENV.imageLinks.logo} alt="logo" className="h-12" />
      </a>

      <div id="collapseMenu" className="max-lg:hidden lg:!flex lg:items-center max-lg:before:fixed max-lg:before:bg-black max-lg:before:opacity-40 max-lg:before:inset-0 max-lg:before:z-50">
        <button id="toggleClose" className="lg:hidden fixed top-2 right-4 z-[100] rounded-full bg-white w-9 h-9 flex items-center justify-center border">
          <svg xmlns="http://www.w3.org/2000/svg" className="w-3.5 h-3.5 fill-black" viewBox="0 0 320.591 320.591">
            <path d="M30.391 318.583a30.37 30.37 0 0 1-21.56-7.288c-11.774-11.844-11.774-30.973 0-42.817L266.643 10.665c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 10.966 28.095 1.414 39.875L51.647 311.295a30.366 30.366 0 0 1-21.256 7.288z" data-original="#fff"></path>
            <path d="M287.9 318.583a30.37 30.37 0 0 1-21.257-8.806L8.83 51.963C-2.078 39.225-.595 20.055 12.143 9.146c11.369-9.736 28.136-9.736 39.504 0l259.331 257.813c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414a30.368 30.368 0 0 1-23.078 7.288z" data-original="#fff"></path>
          </svg>
        </button>

        <ul className="lg:!flex lg:gap-x-10 max-lg:space-y-3 max-lg:fixed max-lg:bg-white max-lg:w-2/3 max-lg:min-w-[300px] max-lg:top-0 max-lg:left-0 max-lg:px-10 max-lg:py-4 max-lg:h-full max-lg:shadow-md max-lg:overflow-auto z-50">
          <li className="mb-6 hidden max-lg:block">
            <a href={ENV.links.web}>
              <img src={ENV.imageLinks.logo} alt="logo" className="h-14" />
            </a>
          </li>
          <li>
            <a href={ENV.links.web} className=" text-gray-900 hover:text-red-600 text-xl flex items-center max-lg:border-b border-gray-800 max-lg:py-3">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 60" className="w-6 h-6 mr-3 fill-current">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <g>
                    <path d="M35.98,51.804C35.887,51.336,35.477,51,35,51H25c-0.477,0-0.887,0.336-0.98,0.804l-2,7 c-0.059,0.294,0.017,0.599,0.207,0.83C22.417,59.866,22.7,60,23,60h14c0.007,0,0.013,0,0.02,0c0.552,0,1-0.448,1-1 c0-0.137-0.028-0.268-0.078-0.387L35.98,51.804z"></path>
                    <path d="M6,48H1c-0.552,0-1,0.448-1,1s0.448,1,1,1h5c0.552,0,1-0.448,1-1S6.552,48,6,48z"></path>
                    <path d="M59,48h-5c-0.552,0-1,0.448-1,1s0.448,1,1,1h5c0.552,0,1-0.448,1-1S59.552,48,59,48z"></path>
                    <rect x="23" y="36" width="6" height="14"></rect>
                    <rect x="31" y="36" width="6" height="14"></rect>
                    <path d="M51,27c3.72,0,7.008,1.861,9,4.695V3H44V0H16v3H0v28.695C1.992,28.861,5.28,27,9,27c2.664,0,5.096,0.966,7,2.548v2.808 C14.349,30.312,11.826,29,9,29c-4.962,0-9,4.038-9,9c0,4.624,3.507,8.441,8,8.941V59c0,0.552,0.448,1,1,1s1-0.448,1-1V46.941 c2.417-0.269,4.546-1.498,6-3.297V48h-4c-0.552,0-1,0.448-1,1s0.448,1,1,1h4h1h4V35c0-0.552,0.448-1,1-1h16c0.552,0,1,0.448,1,1v15 h4h1h4c0.552,0,1-0.448,1-1s-0.448-1-1-1h-4v-4.356c1.454,1.799,3.583,3.028,6,3.297V59c0,0.552,0.448,1,1,1s1-0.448,1-1V46.941 c4.493-0.5,8-4.317,8-8.941c0-4.962-4.038-9-9-9c-2.826,0-5.349,1.312-7,3.356v-2.808C45.904,27.966,48.336,27,51,27z M46,9h10v7 H46V9z M46,18h10v7H46V18z M14,25H4v-7h10V25z M14,16H4V9h10V16z M10,44.92v-2.506l2.707-2.707c0.391-0.391,0.391-1.023,0-1.414 s-1.023-0.391-1.414,0L9,40.586l-2.293-2.293c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L8,42.414v2.506 C4.613,44.432,2,41.519,2,38c0-3.86,3.14-7,7-7s7,3.14,7,7C16,41.519,13.387,44.432,10,44.92z M29,30h-9v-7h9V30z M29,21h-9v-7h9 V21z M29,12h-9V5h9V12z M40,30h-9v-7h9V30z M40,21h-9v-7h9V21z M40,12h-9V5h9V12z M51,31c3.86,0,7,3.14,7,7 c0,3.519-2.613,6.432-6,6.92v-2.506l2.707-2.707c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0L51,40.586l-2.293-2.293 c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414L50,42.414v2.506c-3.387-0.488-6-3.401-6-6.92C44,34.14,47.14,31,51,31z"></path>
                  </g>
                </g>
              </svg>
              Hotel
            </a>
          </li>
          <li>
            <a href={ENV.links.foodNav} className="text-gray-900 hover:text-red-600 text-xl flex items-center max-lg:border-b border-gray-800 max-lg:py-3">
              <svg className="w-6 h-6 mr-3 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <g>
                    <path fill="currentColor" d="M302.206,406.028h-214c-13.125,0-23.773,8.471-23.773,18.928v0.552c0,10.472,10.644,18.944,23.773,18.944h214 c13.128,0,23.778-8.471,23.778-18.944v-0.552C325.983,414.499,315.342,406.028,302.206,406.028z"></path>
                    <path
                      fill="currentColor"
                      d="M57.23,380.53c0.701,0.23,1.319,0.536,1.978,0.973c1.15,0.759,2.434,1.971,3.918,3.665 c1.108,1.25,2.319,2.752,3.73,4.362c2.12,2.408,4.718,5.144,8.372,7.368c1.82,1.104,3.906,2.047,6.183,2.691 c2.28,0.644,4.76,0.981,7.348,0.981c3.001,0.008,5.849-0.452,8.429-1.311c2.258-0.752,4.282-1.786,6.046-2.96 c3.089-2.062,5.378-4.454,7.283-6.601c1.422-1.625,2.641-3.128,3.768-4.4c1.678-1.924,3.089-3.251,4.362-4.01 c0.652-0.383,1.258-0.667,1.986-0.874c0.724-0.192,1.568-0.338,2.71-0.338c1.322,0,2.246,0.185,3.051,0.453 c0.698,0.23,1.319,0.536,1.982,0.973c1.15,0.759,2.434,1.971,3.909,3.665c1.112,1.25,2.323,2.752,3.738,4.362 c2.12,2.408,4.715,5.144,8.372,7.368c1.821,1.112,3.899,2.047,6.187,2.691c2.284,0.644,4.757,0.981,7.344,0.981 c3.002,0.008,5.857-0.452,8.426-1.311c2.262-0.752,4.286-1.786,6.049-2.96c3.093-2.062,5.374-4.454,7.276-6.601 c1.438-1.625,2.652-3.128,3.775-4.4c1.676-1.924,3.094-3.251,4.37-4.01c0.64-0.383,1.253-0.667,1.982-0.874 c0.721-0.192,1.572-0.338,2.706-0.338c1.323,0,2.25,0.185,3.048,0.453c0.702,0.23,1.323,0.536,1.985,0.973 c1.15,0.759,2.434,1.971,3.91,3.665c1.119,1.25,2.327,2.752,3.738,4.362c2.12,2.408,4.714,5.144,8.375,7.368 c1.821,1.112,3.894,2.047,6.183,2.691c2.289,0.644,4.757,0.981,7.345,0.981c3.005,0.008,5.853-0.452,8.433-1.311 c2.254-0.752,4.282-1.786,6.045-2.96c3.09-2.062,5.382-4.454,7.28-6.601c1.426-1.625,2.652-3.128,3.764-4.4 c1.678-1.924,3.097-3.251,4.382-4.01c0.632-0.383,1.253-0.667,1.973-0.874c0.721-0.192,1.572-0.338,2.711-0.338 c1.322,0,2.246,0.185,3.051,0.453c0.706,0.23,1.323,0.536,1.982,0.973c1.153,0.759,2.434,1.971,3.921,3.665 c1.112,1.25,2.319,2.759,3.738,4.362c2.108,2.408,4.714,5.144,8.368,7.368c1.82,1.112,3.902,2.047,6.19,2.691 c2.281,0.644,4.757,0.989,7.341,0.989c3.005,0,5.861-0.46,8.429-1.319c2.254-0.752,4.286-1.786,6.048-2.96 c3.094-2.062,5.382-4.454,7.284-6.601c1.418-1.625,2.645-3.128,3.764-4.4c1.678-1.924,3.097-3.251,4.374-4.01 c0.64-0.383,1.254-0.667,1.981-0.866c0.729-0.2,1.572-0.346,2.714-0.346c4.708,0,8.533-3.825,8.533-8.54 c0-4.714-3.825-8.54-8.533-8.54c-3.009,0-5.856,0.46-8.437,1.318c-2.258,0.744-4.289,1.787-6.045,2.952 c-3.089,2.062-5.378,4.446-7.283,6.608c-1.422,1.618-2.649,3.128-3.768,4.393c-1.672,1.924-3.097,3.25-4.37,4.017 c-0.652,0.383-1.258,0.66-1.978,0.866c-0.728,0.207-1.58,0.338-2.714,0.338c-1.319,0-2.25-0.177-3.055-0.437 c-0.697-0.23-1.314-0.552-1.982-0.988c-1.15-0.751-2.438-1.978-3.913-3.665c-1.112-1.25-2.327-2.744-3.73-4.37 c-2.123-2.392-4.715-5.137-8.376-7.352c-1.828-1.112-3.902-2.047-6.191-2.706c-2.288-0.637-4.757-0.974-7.344-0.974 c-3.006,0-5.853,0.452-8.434,1.318c-2.254,0.744-4.286,1.787-6.045,2.952c-3.089,2.062-5.378,4.446-7.279,6.608 c-1.434,1.618-2.653,3.128-3.772,4.393c-1.679,1.924-3.09,3.25-4.374,4.017c-0.644,0.383-1.254,0.66-1.974,0.866 c-0.721,0.207-1.572,0.338-2.71,0.338c-1.323,0-2.254-0.177-3.051-0.437c-0.701-0.23-1.322-0.552-1.986-0.988 c-1.146-0.751-2.43-1.978-3.91-3.665c-1.112-1.25-2.319-2.744-3.73-4.354c-2.124-2.408-4.714-5.152-8.375-7.368 c-1.829-1.112-3.898-2.047-6.191-2.706c-2.28-0.637-4.761-0.981-7.341-0.974c-3.001-0.008-5.857,0.452-8.433,1.318 c-2.254,0.744-4.286,1.779-6.049,2.952c-3.09,2.062-5.378,4.446-7.28,6.608c-1.426,1.618-2.641,3.128-3.764,4.393 c-1.675,1.924-3.098,3.25-4.374,4.017c-0.64,0.383-1.253,0.66-1.974,0.866c-0.736,0.199-1.579,0.338-2.71,0.338 c-1.322,0-2.254-0.177-3.059-0.437c-0.698-0.23-1.319-0.552-1.974-0.988c-1.157-0.751-2.434-1.978-3.921-3.665 c-1.112-1.258-2.315-2.752-3.734-4.354c-2.112-2.408-4.711-5.152-8.368-7.368c-1.82-1.112-3.91-2.047-6.187-2.706 c-2.281-0.637-4.753-0.981-7.34-0.974c-3.009-0.008-5.853,0.452-8.441,1.318c-2.254,0.744-4.27,1.779-6.034,2.952 c-3.093,2.062-5.382,4.446-7.283,6.608c-1.43,1.61-2.645,3.128-3.764,4.393c-1.679,1.924-3.105,3.25-4.37,4.017 c-0.652,0.383-1.265,0.66-1.986,0.866c-0.721,0.199-1.572,0.33-2.706,0.338c-1.323-0.008-2.25-0.177-3.055-0.437 c-0.697-0.23-1.314-0.552-1.982-0.988c-1.142-0.751-2.434-1.97-3.906-3.665c-1.115-1.258-2.323-2.752-3.733-4.362 c-2.12-2.4-4.719-5.136-8.372-7.368c-1.82-1.104-3.902-2.039-6.186-2.698c-2.286-0.637-4.758-0.981-7.349-0.974 c-4.715,0-8.537,3.826-8.537,8.54c0,4.715,3.822,8.54,8.537,8.54C55.501,380.076,56.428,380.261,57.23,380.53z"
                    ></path>
                    <path
                      fill="currentColor"
                      d="M391.466,125.069l15.156-69.74l54.884-31.87L447.89,0l-65.234,37.872l-18.956,87.197H193.117l1.038,13.562 l7.961,103.442c-2.997-0.146-6.018-0.222-9.058-0.222c-71.24,0-129.888,40.74-137.482,86.163c-0.272,1.641-0.483,2.07-0.64,2.53 c-0.134,0.444-0.211,0.89-0.211,2.56c0,9.729,5.421,14.858,14.823,14.858h247.019c9.388,0,14.819-5.129,14.819-14.858 c0-3.319-0.295-1.824-0.858-5.09c-3.791-22.754-20.416-44.335-45.002-60.22c-7.984-5.159-16.801-9.683-26.292-13.485 c-9.882-3.94-20.485-7.069-31.64-9.199l-7.283-94.864h218.849l-24.1,313.862h-86.469c-3.021-3.702-7.459-5.903-13.673-5.903 h-70.953h-25.265H71.251c-14.14,0-19.081,11.484-19.081,25.621v2.568C52.17,500.531,63.639,512,77.784,512h230.547 c13.156,0,24.019-9.92,25.456-22.708h104.604l27.971-364.223H391.466z M117.361,294.428c-3.757,0-6.816-3.059-6.816-6.83 c0-3.78,3.058-6.846,6.816-6.846c3.783,0,6.842,3.066,6.842,6.846C124.203,291.369,121.145,294.428,117.361,294.428z M144.7,273.928c-3.78,0-6.839-3.059-6.839-6.832c0-3.779,3.059-6.846,6.839-6.846c3.775,0,6.838,3.066,6.838,6.846 C151.538,270.869,148.475,273.928,144.7,273.928z M168.603,294.428c-3.776,0-6.838-3.059-6.838-6.83 c0-3.78,3.062-6.846,6.838-6.846c3.783,0,6.842,3.066,6.842,6.846C175.446,291.369,172.387,294.428,168.603,294.428z M189.103,265.388c-3.775,0-6.842-3.06-6.842-6.832c0-3.763,3.067-6.823,6.842-6.823c3.776,0,6.842,3.06,6.842,6.823 C195.945,262.328,192.879,265.388,189.103,265.388z M271.072,282.461c3.784,0,6.842,3.059,6.842,6.838 c0,3.772-3.059,6.839-6.842,6.839c-3.756,0-6.815-3.067-6.815-6.839C264.257,285.52,267.316,282.461,271.072,282.461z M236.915,260.174c3.783,0,6.842,3.059,6.842,6.823c0,3.795-3.058,6.854-6.842,6.854c-3.772,0-6.816-3.059-6.816-6.854 C230.099,263.234,233.143,260.174,236.915,260.174z M221.555,289.299c0,3.772-3.062,6.839-6.842,6.839 c-3.756,0-6.815-3.067-6.815-6.839c0-3.78,3.058-6.838,6.815-6.838C218.493,282.461,221.555,285.52,221.555,289.299z"
                    ></path>
                  </g>
                </g>
              </svg>
              Food
            </a>
          </li>
          <li>
            <a href={ENV.links.propertyNav} className="text-gray-900 hover:text-red-600 text-xl flex items-center max-lg:border-b border-gray-800 max-lg:py-3">
              <svg className="w-6 h-6 mr-3 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <g>
                    <polygon fill="currentColor" points="434.162,293.382 434.162,493.862 308.321,493.862 308.321,368.583 203.682,368.583 203.682,493.862 77.841,493.862 77.841,293.382 256.002,153.862 "></polygon>
                    <polygon fill="currentColor" points="0,242.682 256,38.93 512,242.682 482.21,285.764 256,105.722 29.79,285.764 "></polygon>
                    <polygon fill="currentColor" points="439.853,18.138 439.853,148.538 376.573,98.138 376.573,18.138 "></polygon>
                  </g>
                </g>
              </svg>
              Property
            </a>
          </li>
          <li>
            <a href={ENV.links.comingSoon} className="text-gray-900 hover:text-red-600 text-xl flex items-center max-lg:border-b border-gray-800 max-lg:py-3">
              <svg className="w-6 h-6 mr-3 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M16.5285 6C16.5098 5.9193 16.4904 5.83842 16.4701 5.75746C16.2061 4.70138 15.7904 3.55383 15.1125 2.65C14.4135 1.71802 13.3929 1 12 1C10.6071 1 9.58648 1.71802 8.88749 2.65C8.20962 3.55383 7.79387 4.70138 7.52985 5.75747C7.50961 5.83842 7.49016 5.9193 7.47145 6H5.8711C4.29171 6 2.98281 7.22455 2.87775 8.80044L2.14441 19.8004C2.02898 21.532 3.40238 23 5.13777 23H18.8622C20.5976 23 21.971 21.532 21.8556 19.8004L21.1222 8.80044C21.0172 7.22455 19.7083 6 18.1289 6H16.5285ZM8 11C8.57298 11 8.99806 10.5684 9.00001 9.99817C9.00016 9.97438 9.00044 9.9506 9.00084 9.92682C9.00172 9.87413 9.00351 9.79455 9.00718 9.69194C9.01451 9.48652 9.0293 9.18999 9.05905 8.83304C9.08015 8.57976 9.10858 8.29862 9.14674 8H14.8533C14.8914 8.29862 14.9198 8.57976 14.941 8.83305C14.9707 9.18999 14.9855 9.48652 14.9928 9.69194C14.9965 9.79455 14.9983 9.87413 14.9992 9.92682C14.9996 9.95134 14.9999 9.97587 15 10.0004C15 10.0004 15 11 16 11C17 11 17 9.99866 17 9.99866C16.9999 9.9636 16.9995 9.92854 16.9989 9.89349C16.9978 9.829 16.9957 9.7367 16.9915 9.62056C16.9833 9.38848 16.9668 9.06001 16.934 8.66695C16.917 8.46202 16.8953 8.23812 16.8679 8H18.1289C18.6554 8 19.0917 8.40818 19.1267 8.93348L19.86 19.9335C19.8985 20.5107 19.4407 21 18.8622 21H5.13777C4.55931 21 4.10151 20.5107 4.13998 19.9335L4.87332 8.93348C4.90834 8.40818 5.34464 8 5.8711 8H7.13208C7.10465 8.23812 7.08303 8.46202 7.06595 8.66696C7.0332 9.06001 7.01674 9.38848 7.00845 9.62056C7.0043 9.7367 7.00219 9.829 7.00112 9.89349C7.00054 9.92785 7.00011 9.96221 7 9.99658C6.99924 10.5672 7.42833 11 8 11ZM9.53352 6H14.4665C14.2353 5.15322 13.921 4.39466 13.5125 3.85C13.0865 3.28198 12.6071 3 12 3C11.3929 3 10.9135 3.28198 10.4875 3.85C10.079 4.39466 9.76472 5.15322 9.53352 6Z"
                  />
                </g>
              </svg>
              Shopping
            </a>
          </li>
          <li>
            <a href={ENV.links.comingSoon} className="text-gray-900 hover:text-red-600 text-xl flex items-center max-lg:border-b border-gray-800 max-lg:py-3">
              <svg className="h-7 mr-3 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <g id="SVGRepo_iconCarrier">
                  <path d="M137.351,339.824c-22.831,0-41.341,18.51-41.341,41.341c0,22.832,18.51,41.319,41.341,41.319 c22.824,0,41.312-18.488,41.312-41.319C178.663,358.333,160.175,339.824,137.351,339.824z M137.351,399.748 c-10.289,0-18.606-8.324-18.606-18.584c0-10.289,8.317-18.606,18.606-18.606c10.259,0,18.584,8.317,18.584,18.606 C155.935,391.424,147.61,399.748,137.351,399.748z"></path>
                  <path d="M409.63,339.824c-22.824,0-41.326,18.51-41.326,41.341c0,22.832,18.502,41.319,41.326,41.319 c22.831,0,41.319-18.488,41.319-41.319C450.949,358.333,432.461,339.824,409.63,339.824z M409.63,399.748 c-10.274,0-18.606-8.324-18.606-18.584c0-10.289,8.332-18.606,18.606-18.606c10.266,0,18.599,8.317,18.599,18.606 C428.228,391.424,419.896,399.748,409.63,399.748z"></path>
                  <path d="M285.992,259.625c-3.855,0-6.998,3.128-6.998,6.99c0,3.862,3.143,6.99,6.998,6.99 c3.854,0,6.982-3.128,6.982-6.99C292.974,262.753,289.846,259.625,285.992,259.625z"></path>
                  <path d="M492.505,89.516H87.1c-3.87,0-7.591,1.549-10.348,4.285l-24.529,24.55c-2.757,2.736-4.292,6.464-4.292,10.334 v20.17c0,8.08,6.545,14.626,14.626,14.626h67.908c-13.344,23.528-55.618,82.845-56.122,83.853 c-0.874,1.728-58.398,39.762-58.398,39.762C5.708,294.139,0,300.595,0,316.184v29.229c0,4.738,0.971,9.303,2.72,13.454 c2.639,6.212,6.997,11.46,12.505,15.174c2.743,1.86,5.79,3.321,9.036,4.336c3.255,1.008,19.518,2.758,23.069,2.758h28.873h7.769 c0.022-29.414,23.958-53.35,53.379-53.35c29.406,0,53.35,23.936,53.35,53.35h165.557c0.022-29.414,23.95-53.35,53.372-53.35 c29.422,0,53.357,23.936,53.365,53.35h14.499c4.722,0,9.458-1.246,13.595-2.994c6.212-2.639,11.297-7.91,15.011-13.425 c1.868-2.75,3.343-5.782,4.351-9.036c1.023-3.247,1.549-6.716,1.549-10.267V206.505v-97.478 C512,98.264,503.268,89.516,492.505,89.516z M200.412,297.645h-25.796c-4.27,0-7.724-3.455-7.724-7.717 c0-4.27,3.454-7.74,7.724-7.74h25.796c4.27,0,7.746,3.47,7.746,7.74C208.158,294.191,204.681,297.645,200.412,297.645z M232.412,233.473c0,5.396-4.366,9.762-9.748,9.762h-93.171c-3.602,0-6.916-1.994-8.621-5.182 c-1.675-3.187-1.482-7.035,0.534-10.022l24.284-35.967c1.824-2.683,4.848-4.3,8.087-4.3h68.887c5.382,0,9.748,4.374,9.748,9.74 V233.473z M339.638,336.999c0,4.026-3.284,7.309-7.317,7.309H276.43c-4.055,0-7.317-3.284-7.317-7.309V195.075 c0-4.04,3.262-7.309,7.317-7.309h55.892c4.033,0,7.317,3.269,7.317,7.309V336.999z M449.51,234.363 c0,4.032-3.276,7.316-7.317,7.316h-49.013c-4.04,0-7.309-3.284-7.309-7.316v-38.695c0-4.047,3.269-7.324,7.309-7.324h49.013 c4.041,0,7.317,3.276,7.317,7.324V234.363z"></path>
                </g>
              </svg>
              Travel
            </a>
          </li>
        </ul>
      </div>

      <NavbarUserMenu onLoginClick={onLoginClick} />
    </div>
  );
};

const NavbarUserMenu = ({ onLoginClick }) => {
  const [isDropdownOpen, setIsDropdownOpen] = useState(false);
  const { authToken, logout } = useAuth();

  const toggleDropdown = () => {
    setIsDropdownOpen((prev) => !prev);
  };

  return (
    <div className="flex items-center max-sm:ml-auto space-x-4">
      {!authToken && (
        <button onClick={onLoginClick} type="button" className="block sm:hidden bg-red-600 hover:bg-red-700 px-4 py-1 rounded text-white">
          Login
        </button>
      )}

      <ul className="m-0">
        <li className="relative px-1">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" onClick={toggleDropdown} className="cursor-pointer underline hover:fill-black" viewBox="0 0 512 512">
            <path d="M437.02 74.981C388.667 26.629 324.38 0 256 0S123.333 26.629 74.98 74.981C26.629 123.333 0 187.62 0 256s26.629 132.667 74.98 181.019C123.333 485.371 187.62 512 256 512s132.667-26.629 181.02-74.981C485.371 388.667 512 324.38 512 256s-26.629-132.667-74.98-181.019zM256 482c-66.869 0-127.037-29.202-168.452-75.511C113.223 338.422 178.948 290 256 290c-49.706 0-90-40.294-90-90s40.294-90 90-90 90 40.294 90 90-40.294 90-90 90c77.052 0 142.777 48.422 168.452 116.489C383.037 452.798 322.869 482 256 482z" data-original="#000000" />
          </svg>

          {/* Dropdown menu */}
          {isDropdownOpen && (
            <div className="bg-white z-20 shadow-lg py-6 px-6 rounded-lg sm:min-w-[280px] max-sm:min-w-[320px] absolute sm:right-0 right-[-100%] lg:top-14 top-10" onMouseLeave={() => setIsDropdownOpen(false)}>
              {authToken ? (
                <>
                  <h6 className="text-lg font-medium text-gray-900 mb-1">Welcome</h6>
                  <p className="text-sm text-gray-600">To access account and manage orders</p>

                  <div className="mt-6 space-y-4">
                    <a href={ENV.links.userRoomBooking} className="flex items-center space-x-3 text-gray-700 hover:text-[#ea384c] hover:bg-[#ea384c]/10 p-2 rounded-md transition-colors">
                      <i className="ri-hotel-line text-xl shrink-0" />
                      <span>Bookings</span>
                    </a>

                    <a href={ENV.links.userFoodOrders} className="flex items-center space-x-3 text-gray-700 hover:text-[#ea384c] hover:bg-[#ea384c]/10 p-2 rounded-md transition-colors">
                      <i className="ri-cake-3-line text-xl shrink-0" />
                      <span>Food Orders</span>
                    </a>

                    <a href={ENV.links.userPropertyEnquiry} className="flex items-center space-x-3 text-gray-700 hover:text-[#ea384c] hover:bg-[#ea384c]/10 p-2 rounded-md transition-colors">
                      <i className="ri-heart-line text-xl shrink-0" />
                      <span>Enquiries</span>
                    </a>

                    <button onClick={logout} className="flex items-center space-x-3 text-gray-700 hover:text-[#ea384c] hover:bg-[#ea384c]/10 p-2 rounded-md transition-colors w-full cursor-pointer">
                      <i className="ri-logout-circle-r-line text-xl shrink-0" />
                      <span>LogOut</span>
                    </button>
                  </div>
                </>
              ) : (
                <>
                  <h6 className="text-lg font-medium text-gray-900 mb-1">Welcome</h6>
                  <p className="text-sm text-gray-600">Please log in to continue your journey.</p>

                  <div className="mt-6 space-y-4">
                    <div onClick={onLoginClick} className="flex items-center space-x-3 text-gray-700 hover:text-[#ea384c] hover:bg-[#ea384c]/10 p-2 rounded-md transition-colors cursor-pointer">
                      <i className="ri-login-box-line text-xl shrink-0" />
                      <span>Login</span>
                    </div>
                  </div>
                </>
              )}
            </div>
          )}
        </li>
      </ul>

      {/* Mobile Nav Toggle Button */}
      <button className="lg:hidden ml-4">
        <svg className="w-7 h-7" fill="#000" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fillRule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clipRule="evenodd" />
        </svg>
      </button>
    </div>
  );
};

const Navbar = ({ onLoginClick }) => {
  return (
    <nav className="shadow-lg font-[sans-serif] tracking-wide relative z-50">
      <section className="py-3 bg-red-600 text-white text-center px-10">
        <p className="text-sm">
          <span>Summer Offer</span>: Save up to 40% on hotel booking. Limited-time offer!
        </p>
      </section>
      <ContactInfoBar onLoginClick={onLoginClick} />
      <NavbarLinks onLoginClick={onLoginClick} />
    </nav>
  );
};

export default Navbar;
